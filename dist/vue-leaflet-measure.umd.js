(function(r,w){typeof exports=="object"&&typeof module!="undefined"?module.exports=w(require("vue")):typeof define=="function"&&define.amd?define(["vue"],w):(r=typeof globalThis!="undefined"?globalThis:r||self,r.VueLeafletMeasure=w(r.vue))})(this,function(r){"use strict";var w={acres:{factor:24711e-8,display:"acres",decimals:2},feet:{factor:3.2808,display:"feet",decimals:0},kilometers:{factor:.001,display:"km",decimals:2},hectares:{factor:1e-4,display:"hectares",decimals:2},meters:{factor:1,display:"m",decimals:0},miles:{factor:.0006213636363636364,display:"miles",decimals:2},sqfeet:{factor:10.7639,display:"sqfeet",decimals:0},sqmeters:{factor:1,display:"m\xB2",decimals:0},sqkilometers:{factor:.001,display:"km\xB2",decimals:0},sqmiles:{factor:386102e-12,display:"sqmiles",decimals:2}},f=63710088e-1,Y={meters:f,metres:f,millimeters:f*1e3,millimetres:f*1e3,centimeters:f*100,centimetres:f*100,kilometers:f/1e3,kilometres:f/1e3,miles:f/1609.344,nauticalmiles:f/1852,inches:f*39.37,yards:f/1.0936,feet:f*3.28084,radians:1,degrees:f/111325};function V(e,s,t){if(t=t||{},!x(t))throw new Error("options is invalid");var i=t.bbox,a=t.id;if(e===void 0)throw new Error("geometry is required");if(s&&s.constructor!==Object)throw new Error("properties must be an Object");i&&te(i),a&&se(a);var o={type:"Feature"};return a&&(o.id=a),i&&(o.bbox=i),o.properties=s||{},o.geometry=e,o}function I(e,s,t){if(!e)throw new Error("coordinates is required");if(e.length<2)throw new Error("coordinates must be an array of two or more positions");if(!T(e[0][1])||!T(e[0][1]))throw new Error("coordinates must contain numbers");return V({type:"LineString",coordinates:e},s,t)}function ee(e,s){if(e==null)throw new Error("radians is required");if(s&&typeof s!="string")throw new Error("units must be a string");var t=Y[s||"kilometers"];if(!t)throw new Error(s+" units is invalid");return e*t}function P(e){if(e==null)throw new Error("degrees is required");var s=e%360;return s*Math.PI/180}function T(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function x(e){return!!e&&e.constructor===Object}function te(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(s){if(!T(s))throw new Error("bbox must only contain numbers")})}function se(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}function R(e){if(!e)throw new Error("coord is required");if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates;if(Array.isArray(e)&&e.length>=2&&e[0].length===void 0&&e[1].length===void 0)return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function re(e,s,t){if(t=t||{},!x(t))throw new Error("options is invalid");var i=t.units,a=R(e),o=R(s),c=P(o[1]-a[1]),l=P(o[0]-a[0]),n=P(a[1]),u=P(o[1]),h=Math.pow(Math.sin(c/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(n)*Math.cos(u);return ee(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),i)}function O(e,s,t){if(e!==null)for(var i,a,o,c,l,n,u,h=0,m=0,p,d=e.type,E=d==="FeatureCollection",N=d==="Feature",S=E?e.features.length:1,k=0;k<S;k++){u=E?e.features[k].geometry:N?e.geometry:e,p=u?u.type==="GeometryCollection":!1,l=p?u.geometries.length:1;for(var v=0;v<l;v++){var _=0,b=0;if(c=p?u.geometries[v]:u,c!==null){n=c.coordinates;var g=c.type;switch(h=t&&(g==="Polygon"||g==="MultiPolygon")?1:0,g){case null:break;case"Point":if(s(n,m,k,_,b)===!1)return!1;m++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<n.length;i++){if(s(n[i],m,k,_,b)===!1)return!1;m++,g==="MultiPoint"&&_++}g==="LineString"&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<n.length;i++){for(a=0;a<n[i].length-h;a++){if(s(n[i][a],m,k,_,b)===!1)return!1;m++}g==="MultiLineString"&&_++,g==="Polygon"&&b++}g==="Polygon"&&_++;break;case"MultiPolygon":for(i=0;i<n.length;i++){for(g==="MultiPolygon"&&(b=0),a=0;a<n[i].length;a++){for(o=0;o<n[i][a].length-h;o++){if(s(n[i][a][o],m,k,_,b)===!1)return!1;m++}b++}_++}break;case"GeometryCollection":for(i=0;i<c.geometries.length;i++)if(O(c.geometries[i],s,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function q(e,s){var t,i,a,o,c,l,n,u,h,m,p=0,d=e.type==="FeatureCollection",E=e.type==="Feature",N=d?e.features.length:1;for(t=0;t<N;t++){for(l=d?e.features[t].geometry:E?e.geometry:e,u=d?e.features[t].properties:E?e.properties:{},h=d?e.features[t].bbox:E?e.bbox:void 0,m=d?e.features[t].id:E?e.id:void 0,n=l?l.type==="GeometryCollection":!1,c=n?l.geometries.length:1,a=0;a<c;a++){if(o=n?l.geometries[a]:l,o===null){if(s(null,p,u,h,m)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(s(o,p,u,h,m)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<o.geometries.length;i++)if(s(o.geometries[i],p,u,h,m)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}p++}}function ie(e,s,t){var i=t;return q(e,function(a,o,c,l,n){o===0&&t===void 0?i=a:i=s(i,a,o,c,l,n)}),i}function ae(e,s){q(e,function(t,i,a,o,c){var l=t===null?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return s(V(t,a,{bbox:o,id:c}),i,0)===!1?!1:void 0}var n;switch(l){case"MultiPoint":n="Point";break;case"MultiLineString":n="LineString";break;case"MultiPolygon":n="Polygon";break}for(var u=0;u<t.coordinates.length;u++){var h=t.coordinates[u],m={type:n,coordinates:h};if(s(V(m,a),i,u)===!1)return!1}})}function oe(e,s){ae(e,function(t,i,a){var o=0;if(!!t.geometry){var c=t.geometry.type;if(!(c==="Point"||c==="MultiPoint")){var l;if(O(t,function(n,u,h,m,p){if(l===void 0){l=n;return}var d=I([l,n],t.properties);if(s(d,i,a,p,o)===!1)return!1;o++,l=n})===!1)return!1}}})}function ne(e,s,t){var i=t,a=!1;return oe(e,function(o,c,l,n,u){a===!1&&t===void 0?i=o:i=s(i,o,c,l,n,u),a=!0}),i}function le(e,s){if(s=s||{},!x(s))throw new Error("options is invalid");if(!e)throw new Error("geojson is required");return ne(e,function(t,i){var a=i.geometry.coordinates;return t+re(a[0],a[1],s)},0)}function ce(e){return ie(e,function(s,t){return s+L(t)},0)}var $=6378137;function L(e){var s=0,t;switch(e.type){case"Polygon":return z(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)s+=z(e.coordinates[t]);return s;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(t=0;t<e.geometries.length;t++)s+=L(e.geometries[t]);return s}}function z(e){var s=0;if(e&&e.length>0){s+=Math.abs(j(e[0]));for(var t=1;t<e.length;t++)s-=Math.abs(j(e[t]))}return s}function j(e){var s,t,i,a,o,c,l,n=0,u=e.length;if(u>2){for(l=0;l<u;l++)l===u-2?(a=u-2,o=u-1,c=0):l===u-1?(a=u-1,o=0,c=1):(a=l,o=l+1,c=l+2),s=e[a],t=e[o],i=e[c],n+=(A(i[0])-A(s[0]))*Math.sin(A(t[1]));n=n*$*$/2}return n}function A(e){return e*Math.PI/180}function B(e){return e<10?"0"+e.toString():e.toString()}function G(e,s,t){const i=Math.abs(e),a=Math.floor(i),o=Math.floor((i-a)*60),c=Math.round((i-a-o/60)*3600*100)/100,l=i===e?s:t;return B(a)+"\xB0 "+B(o)+"' "+B(c)+'" '+l}function U(e,s){const t=s[s.length-1],i=s.map(n=>[n.lat,n.lng]),a=e.polyline(i),o=e.polygon(i),c=le(a.toGeoJSON(),{units:"kilometers"})*1e3,l=ce(o.toGeoJSON());return{lastCoord:{dd:{x:t.lng,y:t.lat},dms:{x:G(t.lng,"E","W"),y:G(t.lat,"N","S")}},length:c,area:l}}function y(e,s){return s||(s=document),s.querySelector(e)}function M(e){if(e)return e.setAttribute("style","display:none;"),e}function C(e){if(e)return e.removeAttribute("style"),e}const ue={activeColor:"#ABE67E",completedColor:"#C8F2BE"};class he{constructor(s,t){this._options=s.extend({},ue,this._options,t)}getSymbol(s){return{measureDrag:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:.7,fillColor:this._options.activeColor,fillOpacity:.5,className:"layer-measuredrag"},measureArea:{clickable:!1,stroke:!1,fillColor:this._options.activeColor,fillOpacity:.2,className:"layer-measurearea"},measureBoundary:{clickable:!1,color:this._options.activeColor,weight:2,opacity:.9,fill:!1,className:"layer-measureboundary"},measureVertex:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:1,fillColor:this._options.activeColor,fillOpacity:.7,className:"layer-measurevertex"},measureVertexActive:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:1,fillColor:this._options.activeColor,fillOpacity:1,className:"layer-measurevertex active"},resultArea:{clickable:!0,color:this._options.completedColor,weight:2,opacity:.9,fillColor:this._options.completedColor,fillOpacity:.2,className:"layer-measure-resultarea"},resultLine:{clickable:!0,color:this._options.completedColor,weight:3,opacity:.9,fill:!1,className:"layer-measure-resultline"},resultPoint:{clickable:!0,radius:4,color:this._options.completedColor,weight:2,opacity:1,fillColor:this._options.completedColor,fillOpacity:.7,className:"layer-measure-resultpoint"}}[s]}}function D(e,s=0,t="pt-BR"){return isNaN(e)?e:s?e==null?void 0:e.toLocaleString(t,{minimumFractionDigits:s,maximumFractionDigits:s}):e==0?0:e?Number.isInteger(e)?e.toLocaleString(t):e.toLocaleString(t,{minimumFractionDigits:2,maximumFractionDigits:2}):""}function me(e){e.Control.Measure=e.Control.extend({_className:"leaflet-control-measure",options:{units:{},position:"topright",primaryLengthUnit:"feet",secondaryLengthUnit:"miles",primaryAreaUnit:"acres",activeColor:"#ABE67E",completedColor:"#C8F2BE",captureZIndex:1e4,popupOptions:{className:"leaflet-measure-resultpopup",autoPanPadding:[10,10]},controlTemplateRef:null,pointPopupTemplateRef:null,areaPopupTemplateRef:null,linePopupTemplateRef:null,resultsTemplateRef:null},initialize:function(s){e.setOptions(this,s);const{activeColor:t,completedColor:i}=this.options;this._symbols=new he(e,{activeColor:t,completedColor:i}),this.options.units=e.extend({},w,this.options.units)},onAdd:function(s){return this._map=s,this._latlngs=[],this._initLayout(),s.on("click",this._collapse,this),this._layer=e.layerGroup().addTo(s),this._container},onRemove:function(s){s.off("click",this._collapse,this),s.removeLayer(this._layer)},_initLayout:function(){const s=this._className,t=this._container=e.DomUtil.create("div",`${s} leaflet-bar`);t.innerHTML=this.options.controlTemplateRef.value.innerHTML,t.setAttribute("aria-haspopup",!0),e.DomEvent.disableClickPropagation(t),e.DomEvent.disableScrollPropagation(t);const i=this.$toggle=y(".js-toggle",t);this.$interaction=y(".js-interaction",t);const a=y(".js-start",t),o=y(".js-cancel",t),c=y(".js-finish",t);this.$startPrompt=y(".js-startprompt",t),this.$measuringPrompt=y(".js-measuringprompt",t),this.$startHelp=y(".js-starthelp",t),this.$results=y(".js-results",t),this.$measureTasks=y(".js-measuretasks",t),this._collapse(),this._updateMeasureNotStarted(),e.Browser.android||(e.DomEvent.on(t,"mouseenter",this._expand,this),e.DomEvent.on(t,"mouseleave",this._collapse,this)),e.DomEvent.on(i,"click",e.DomEvent.stop),e.Browser.touch?e.DomEvent.on(i,"click",this._expand,this):e.DomEvent.on(i,"focus",this._expand,this),e.DomEvent.on(a,"click",e.DomEvent.stop),e.DomEvent.on(a,"click",this._startMeasure,this),e.DomEvent.on(o,"click",e.DomEvent.stop),e.DomEvent.on(o,"click",this._finishMeasure,this),e.DomEvent.on(c,"click",e.DomEvent.stop),e.DomEvent.on(c,"click",this._handleMeasureDoubleClick,this)},_expand:function(){M(this.$toggle),C(this.$interaction)},_collapse:function(){this._locked||(M(this.$interaction),C(this.$toggle))},_updateMeasureNotStarted:function(){M(this.$startHelp),M(this.$results),M(this.$measureTasks),M(this.$measuringPrompt),C(this.$startPrompt)},_updateMeasureStartedNoPoints:function(){M(this.$results),C(this.$startHelp),C(this.$measureTasks),M(this.$startPrompt),C(this.$measuringPrompt)},_updateMeasureStartedWithPoints:function(){M(this.$startHelp),C(this.$results),C(this.$measureTasks),M(this.$startPrompt),C(this.$measuringPrompt)},_startMeasure:function(){this._locked=!0,this._measureVertexes=e.featureGroup().addTo(this._layer),this._captureMarker=e.marker(this._map.getCenter(),{clickable:!0,zIndexOffset:this.options.captureZIndex,opacity:0,autoPanOnFocus:!1}).addTo(this._layer),this._setCaptureMarkerIcon(),this._captureMarker.on("mouseout",this._handleMapMouseOut,this).on("dblclick",this._handleMeasureDoubleClick,this).on("click",this._handleMeasureClick,this),this._map.on("mousemove",this._handleMeasureMove,this).on("mouseout",this._handleMapMouseOut,this).on("move",this._centerCaptureMarker,this).on("resize",this._setCaptureMarkerIcon,this),e.DomEvent.on(this._container,"mouseenter",this._handleMapMouseOut,this),this._updateMeasureStartedNoPoints(),this._map.fire("measurestart",null,!1)},_finishMeasure:function(){const s=e.extend({},this._resultsModel,{points:this._latlngs});this._locked=!1,e.DomEvent.off(this._container,"mouseover",this._handleMapMouseOut,this),this._clearMeasure(),this._captureMarker.off(),this._map.off("mousemove").off("mouseout").off("move").off("resize"),this._layer.removeLayer(this._measureVertexes).removeLayer(this._captureMarker),this._measureVertexes=null,this._updateMeasureNotStarted(),this._collapse(),this._map.fire("measurefinish",s,!1)},_clearMeasure:function(){this._latlngs=[],this._resultsModel=null,this._measureVertexes.clearLayers(),this._measureDrag&&this._layer.removeLayer(this._measureDrag),this._measureArea&&this._layer.removeLayer(this._measureArea),this._measureBoundary&&this._layer.removeLayer(this._measureBoundary),this._measureDrag=null,this._measureArea=null,this._measureBoundary=null},_centerCaptureMarker:function(){this._captureMarker.setLatLng(this._map.getCenter())},_setCaptureMarkerIcon:function(){this._captureMarker.setIcon(e.divIcon({iconSize:this._map.getSize().multiplyBy(2)}))},_getMeasurementDisplayStrings:function(s){const t=this.options.units;return{lengthDisplay:i(s.length,this.options.primaryLengthUnit,this.options.secondaryLengthUnit),areaDisplay:i(s.area,this.options.primaryAreaUnit,this.options.secondaryAreaUnit)};function i(o,c,l){if(c&&t[c]){let n=a(o,t[c]);if(l&&t[l]){const u=a(o,t[l]);n=`${n} (${u})`}return n}return a(o,null)}function a(o,c){const l={acres:"acres",feet:"feet",kilometers:"kilometers",hectares:"hectares",meters:"meters",miles:"miles",sqfeet:"sqfeet",sqmeters:"sqmeters",sqmiles:"sqmiles"},n=e.extend({factor:1,decimals:0},c),u=D(o*n.factor,n.decimals),h=l[n.display]||n.display;return[u,h].join(" ")}},_updateResults:function(){const s=U(e,this._latlngs);this.options.model.value=this._resultsModel=e.extend({},s,this._getMeasurementDisplayStrings(s),{pointCount:this._latlngs.length}),setTimeout(()=>{this.$results.innerHTML=this.options.resultsTemplateRef.value.innerHTML},100)},_handleMeasureMove:function(s){this._measureDrag?this._measureDrag.setLatLng(s.latlng):this._measureDrag=e.circleMarker(s.latlng,this._symbols.getSymbol("measureDrag")).addTo(this._layer),this._measureDrag.bringToFront()},_handleMeasureDoubleClick:function(){const s=this._latlngs;let t,i;if(this._finishMeasure(),!s.length)return;s.length>2&&s.push(s[0]);const a=U(e,s);s.length===1?(t=e.circleMarker(s[0],this._symbols.getSymbol("resultPoint")),this.options.model.value=a,i=this.options.pointPopupTemplateRef.value):s.length===2?(t=e.polyline(s,this._symbols.getSymbol("resultLine")),this.options.model.value=e.extend({},a,this._getMeasurementDisplayStrings(a)),i=this.options.linePopupTemplateRef.value):(t=e.polygon(s,this._symbols.getSymbol("resultArea")),this.options.model.value=e.extend({},a,this._getMeasurementDisplayStrings(a)),i=this.options.areaPopupTemplateRef.value),setTimeout(()=>{const o=e.DomUtil.create("div","");o.innerHTML=i.innerHTML;const c=y(".js-zoomto",o);c&&(e.DomEvent.on(c,"click",e.DomEvent.stop),e.DomEvent.on(c,"click",function(){t.getBounds?this._map.fitBounds(t.getBounds(),{padding:[20,20],maxZoom:17}):t.getLatLng&&this._map.panTo(t.getLatLng())},this));const l=y(".js-deletemarkup",o);l&&(e.DomEvent.on(l,"click",e.DomEvent.stop),e.DomEvent.on(l,"click",function(){this._layer.removeLayer(t)},this)),t.addTo(this._layer),t.bindPopup(o,this.options.popupOptions),t.getBounds?t.openPopup(t.getBounds().getCenter()):t.getLatLng&&t.openPopup(t.getLatLng())},100)},_handleMeasureClick:function(s){const t=this._map.mouseEventToLatLng(s.originalEvent),i=this._latlngs[this._latlngs.length-1],a=this._symbols.getSymbol("measureVertex");(!i||!t.equals(i))&&(this._latlngs.push(t),this._addMeasureArea(this._latlngs),this._addMeasureBoundary(this._latlngs),this._measureVertexes.eachLayer(function(o){o.setStyle(a),o._path&&o._path.setAttribute("class",a.className)}),this._addNewVertex(t),this._measureBoundary&&this._measureBoundary.bringToFront(),this._measureVertexes.bringToFront()),this._updateResults(),this._updateMeasureStartedWithPoints()},_handleMapMouseOut:function(){this._measureDrag&&(this._layer.removeLayer(this._measureDrag),this._measureDrag=null)},_addNewVertex:function(s){e.circleMarker(s,this._symbols.getSymbol("measureVertexActive")).addTo(this._measureVertexes)},_addMeasureArea:function(s){if(s.length<3){this._measureArea&&(this._layer.removeLayer(this._measureArea),this._measureArea=null);return}this._measureArea?this._measureArea.setLatLngs(s):this._measureArea=e.polygon(s,this._symbols.getSymbol("measureArea")).addTo(this._layer)},_addMeasureBoundary:function(s){if(s.length<2){this._measureBoundary&&(this._layer.removeLayer(this._measureBoundary),this._measureBoundary=null);return}this._measureBoundary?this._measureBoundary.setLatLngs(s):this._measureBoundary=e.polyline(s,this._symbols.getSymbol("measureBoundary")).addTo(this._layer)}}),e.Map.mergeOptions({measureControl:!1}),e.Map.addInitHook(function(){this.options.measureControl&&(this.measureControl=new e.Control.Measure().addTo(this))}),e.control.measure=function(s){return new e.Control.Measure(s)}}var Te="";const fe={class:"templates"},de=[r.createStaticVNode('<a class="leaflet-control-measure-toggle js-toggle" href="#" title="Medir dist\xE2ncia e \xE1rea"> Medir </a><div class="leaflet-control-measure-interaction js-interaction"><div class="js-startprompt startprompt"><h3>Medir dist\xE2ncia e \xE1rea</h3><ul class="tasks"><a href="#" class="js-start start">Criar nova medida</a></ul></div><div class="js-measuringprompt"><h3>Medir dist\xE2ncia e \xE1rea</h3><p class="js-starthelp">Comece a medir adicionando pontos no mapa</p><div class="js-results results"></div><ul class="js-measuretasks tasks"><li><a href="#" class="js-cancel cancel">Cancelar</a></li><li><a href="#" class="js-finish finish">Finalizar</a></li></ul></div></div>',2)],pe=r.createElementVNode("h3",null,"Localiza\xE7\xE3o do ponto",-1),_e=r.createElementVNode("span",{class:"coorddivider"},"/",-1),ye=r.createElementVNode("span",{class:"coorddivider"},"/",-1),ge=r.createElementVNode("ul",{class:"tasks"},[r.createElementVNode("li",null,[r.createElementVNode("a",{href:"#",class:"js-zoomto zoomto"},"Centralizar no ponto")]),r.createElementVNode("li",null,[r.createElementVNode("a",{href:"#",class:"js-deletemarkup deletemarkup"},"Excluir")])],-1),Me=r.createElementVNode("h3",null,"Medida de linha",-1),Ee=r.createElementVNode("ul",{class:"tasks"},[r.createElementVNode("li",null,[r.createElementVNode("a",{href:"#",class:"js-zoomto zoomto"},"Centralizar na linha")]),r.createElementVNode("li",null,[r.createElementVNode("a",{href:"#",class:"js-deletemarkup deletemarkup"},"Excluir")])],-1),ke=r.createElementVNode("h3",null,"\xC1rea",-1),be=r.createElementVNode("ul",{class:"tasks"},[r.createElementVNode("li",null,[r.createElementVNode("a",{href:"#",class:"js-zoomto zoomto"},"Centralizar na \xE1rea")]),r.createElementVNode("li",null,[r.createElementVNode("a",{href:"#",class:"js-deletemarkup deletemarkup"},"Excluir")])],-1),Ce={class:"group"},Ne=r.createElementVNode("p",{class:"lastpoint heading"},"\xDAltimo ponto adicionado",-1),ve=r.createElementVNode("span",{class:"coorddivider"},"/",-1),we=r.createElementVNode("span",{class:"coorddivider"},"/",-1),De={key:0,class:"group"},Pe=r.createElementVNode("span",{class:"heading"},"Extens\xE3o da linha",-1),Se={key:1,class:"group"},Ve=r.createElementVNode("span",{class:"heading"},"\xC1rea",-1);return{__name:"LMeasure",props:["mapRef"],emits:["ready"],setup(e,{emit:s}){const t=e,i=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||void 0,{mapRef:a}=r.toRefs(t),o=r.ref(),c=r.ref(),l=r.ref(),n=r.ref(),u=r.ref(),h=r.ref({}),m=r.inject("useGlobalLeaflet");return r.watch(a,async p=>{const d=m?i.L:await import("leaflet/dist/leaflet-src.esm");me(d),a.value&&new d.Control.Measure({primaryLengthUnit:"meters",secondaryLengthUnit:"kilometers",primaryAreaUnit:"sqmeters",secondaryAreaUnit:"sqkilometers",controlTemplateRef:o,pointPopupTemplateRef:c,areaPopupTemplateRef:l,linePopupTemplateRef:n,resultsTemplateRef:u,model:h}).addTo(p)}),(p,d)=>{var E,N,S,k,v,_,b,g,F,H,W,J,Z,K,Q,X;return r.openBlock(),r.createElementBlock("section",fe,[r.createElementVNode("section",{ref_key:"controlTemplateRef",ref:o},de,512),r.createElementVNode("section",{ref_key:"pointPopupTemplateRef",ref:c},[pe,r.createElementVNode("p",null,[r.createTextVNode(r.toDisplayString((N=(E=h.value.lastCoord)==null?void 0:E.dms)==null?void 0:N.y)+" ",1),_e,r.createTextVNode(" "+r.toDisplayString((k=(S=h.value.lastCoord)==null?void 0:S.dms)==null?void 0:k.x),1)]),r.createElementVNode("p",null,[r.createTextVNode(r.toDisplayString(r.unref(D)((_=(v=h.value.lastCoord)==null?void 0:v.dd)==null?void 0:_.y,2))+" ",1),ye,r.createTextVNode(" "+r.toDisplayString(r.unref(D)((g=(b=h.value.lastCoord)==null?void 0:b.dd)==null?void 0:g.x,2)),1)]),ge],512),r.createElementVNode("section",{ref_key:"linePopupTemplateRef",ref:n},[Me,r.createElementVNode("p",null,r.toDisplayString(h.value.lengthDisplay),1),Ee],512),r.createElementVNode("section",{ref_key:"areaPopupTemplateRef",ref:l},[ke,r.createElementVNode("p",null,r.toDisplayString(h.value.areaDisplay),1),r.createElementVNode("p",null,r.toDisplayString(h.value.lengthDisplay)+" de per\xEDmetro",1),be],512),r.createElementVNode("section",{ref_key:"resultsTemplateRef",ref:u},[r.createElementVNode("div",Ce,[Ne,r.createElementVNode("p",null,[r.createTextVNode(r.toDisplayString((H=(F=h.value.lastCoord)==null?void 0:F.dms)==null?void 0:H.y)+" ",1),ve,r.createTextVNode(" "+r.toDisplayString((J=(W=h.value.lastCoord)==null?void 0:W.dms)==null?void 0:J.x),1)]),r.createElementVNode("p",null,[r.createTextVNode(r.toDisplayString(r.unref(D)((K=(Z=h.value.lastCoord)==null?void 0:Z.dd)==null?void 0:K.y,2))+" ",1),we,r.createTextVNode(" "+r.toDisplayString(r.unref(D)((X=(Q=h.value.lastCoord)==null?void 0:Q.dd)==null?void 0:X.x,2)),1)])]),h.value.pointCount>1?(r.openBlock(),r.createElementBlock("div",De,[r.createElementVNode("p",null,[Pe,r.createTextVNode(" "+r.toDisplayString(h.value.lengthDisplay),1)])])):r.createCommentVNode("",!0),h.value.pointCount>2?(r.openBlock(),r.createElementBlock("div",Se,[r.createElementVNode("p",null,[Ve,r.createTextVNode(" "+r.toDisplayString(h.value.areaDisplay),1)])])):r.createCommentVNode("",!0)],512)])}}}});
